\input{/Users/Juste/Documents/ComplexSystems/CityNetwork/Docs/Headers/WPHeader.tex}


\title{MongoDB Administration\bigskip
}
\author{}
\date{}


\maketitle

\justify



\section*{Installation}

\subsection*{Installation on Ubuntu with sudo}

\begin{enumerate}
\item Get package signing key
\texttt{sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv EA312927}
\item Create package list file
\texttt{echo "deb http://repo.mongodb.org/apt/ubuntu {\$}VERSION/mongodb-org/3.2 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.2.list} with \texttt{{\$}VERSION} : 12.04 = precise ; 14.04 = trusty ; 16.04 = xenial
\item Reload local packages \texttt{sudo apt-get update}
\item Install \texttt{sudo apt-get install -y mongodb-org}
\end{enumerate}


\subsection*{Install from source}

\begin{enumerate}
\item Download tarball \texttt{curl -O https://fastdl.mongodb.org/linux/mongodb-linux-x86{\_}64-3.4.0-rc4.tgz}
\item Untar \texttt{tar -zxvf mongodb-linux-x86{\_}64-3.4.0-rc4.tgz}
\item Move to directory \texttt{mkdir -p mongodb ; cp -R -n mongodb-linux-x86{\_}64-3.4.0-rc4/ mongodb}
\item add to path
\end{enumerate}




\section*{Authentication}

Create admin db

Create user with roles : \texttt{createUser({user:"",pwd:"",roles:["root"]})} for superadmin root.


\section*{Dump/restore}

\texttt{mongodump/mongorestore}


\section*{Import/Export}

\texttt{mongoimport/mongoexport}

$\rightarrow$ for importing from external source : csv, json



\section*{RMongo}

To install : depending on Java config, installation of RJava may require \texttt{R CMD javareconf} before.


\paragraph{Commands}

\texttt{mongo <- mongoDbConnect("test", "localhost", 27017)}

\texttt{output <- dbGetQuery(mongo, "test_data",
'{"foo": "bar"}')}

\texttt{output <- dbGetQueryForKeys(mongo, "test_data",
'{"foo": "bar"}', '{"foo": 1}')}

\texttt{dbDisconnect(mongo)}










%%%%%%%%%%%%%%%%%%%%
%% Biblio
%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{apalike}
\bibliography{/Users/Juste/Documents/ComplexSystems/CityNetwork/Biblio/Bibtex/CityNetwork}


\end{document}
