Un même espace géographique peut être représenté sous forme de cartes ou de base de données numériques dont les contenus diffèrent en fonction des besoins. La généralisation est le processus utilisé pour dériver une représentation d´une autre représentation plus précise. Il ne s´agit pas un simple filtrage d´informations mais la création d´une nouvelle représentation qui repose sur des opérations d´élimination, de regroupement et modification. Le cartographe traditionnel ne ‘gomme´ pas les informations devenues superflues, mais il redessine l´espace selon une nouvelle logique. Afin de proposer des données vectorielles adaptées aux technologies actuelles, les données géographiques sont disponibles sous forme numérique par restitution photogrammétrique, scannage ou numérisation. Les bases de données ainsi constituées ne répondent pas à tous les besoins et il faut mettre au point des procédures permettant de déduire l´information demandée. Le processus de généralisation manuel étant extrêmement long et coûteux, les instituts de cartographie ont longtemps proposé une gamme d´échelles en associant un contenu type pour chaque échelle. Des produits ciblés peuvent être réalisés mais leur coût est non négligeable. Seules les petites échelles – pour lesquelles le contenu en information est considérablement réduit – offrent une plus grande panoplie de produits parce que la tâche à accomplir est moins longue. L´enjeu actuel est de mettre au point des procédures permettant d´automatiser le processus de généralisation pour proposer des cartes ou bases de données ‘à la carte´ et non un seul produit qui moyenne des besoins et ne satisfait finalement personne.
Ce papier résume une thèse de doctorat [Ruas 99] qui propose un modèle de généralisation à base de contraintes et d´autonomie, testé sur des données urbaines de précision métrique. Le modèle proposé est implémenté sur le prototype orienté objet Stratège développé au laboratoire COGIT du l´IGN.
La généralisation est définie par l´Association de Cartographie Internationale comme "la sélection et la représentation simplifiée de détails en fonction de l´échelle et des objectifs de la carte". Dans le contexte des bases de données géographiques, de nouveaux termes sont apparus telles que la généralisation d´abstraction, de modèle ou conceptuelle [Ormeling 96 1] d´un côté, et de l´autre la généralisation de données ou graphique, voire cartographique. Certains auteurs voient ces deux phases comme successives et complémentaires [Molenaar 96 14] ou d´autres séparent – voire opposent - la généralisation bases de données de la généralisation cartographique. Les associations entre 1/ transformations de schéma et généralisation de base de données d´une part et 2/ transformations de données et généralisation cartographique d´autre part, sont dues au fait qu´il est effectivement possible de ne travailler que sur le schéma de données pour certaines dérivations de base alors que la généralisation cartographique impose des transformations métriques sur les données sans que des modifications de schéma ne soient forcement essentielles. Ces associations génèrent des confusions dans la communauté SIG.
Les bases de données sont organisées en classes, décrites par des attributs et des relations, instanciées par des objets. La généralisation est toujours une généralisation de données qui peut requérir une transformation du schéma en éliminant des classes, des attributs et en fusionnant des classes ou des attributs. Ces transformations de schéma se traduisent par des opérations facilement automatisables sur les objets, sous réserve des mises à jours des relations (dont les relations topologiques) attachées aux objets modifiés :
une élimination de classe se traduit par des éliminations d´objets,
une élimination ou une simplification du domaine de définition d´un attribut induit des agrégations d´objets connexes,
une fusion de classes induit des agrégations d´objets connexes de classes fusionnées.
En dehors de ces cas simples, la généralisation de bases de données requiert des procédures complexes qui reposent sur l´analyse de données parce les attributs descriptifs initiaux ne permettent pas de discriminer de façon simple ce qui est important de ce qui ne l´est pas. Par exemple :
la réduction du réseau routier doit tenir compte des fonctions de desserte et du temps de parcours,
la réduction du réseau hydrographique doit maintenir la logique d´écoulement des eaux,
la création de zones urbaines à partir de maisons nécessite des analyses du tissu urbain.
La généralisation cartographique est plus simple à appréhender : lorsque l´échelle diminue, une simple homothétie entre la taille réelle des objets et l´échelle de dessin rend les objets souvent non interprétables et parfois invisibles. Les règles de cartographie [Cuenin 73] décrivent les seuils en dessous desquels une information devient du bruit. Les objets sont grossis pour supporter le changement d´échelle, mais se superposent. Il devient nécessaire d´éliminer certaines informations et d´en déplacer d´autres pour que l´information finale reste visible et interprétable. La Figure 1 montre deux représentations cartographiques d´une même ville à deux échelles différentes. Pour réaliser un 1 : 50 000 des rues et des bâtiments ont été éliminés, les objets préservés ont tous été dilatés. Certains bâtiments ont été regroupés en zones urbaines.

Montpellier : Contenu pour un 1 : 25 000 IGN Contenu pour un 1 : 50 000 IGN
Figure 1 Evolution du contenu d´information en fonction de l´échelle
La généralisation de données numériques - qu´elle soit ou non à but cartographique - est composée de deux phases : la première est la conception d´un schéma de données, des règles de correspondances entre le schéma initial et final, et le transfert des données entre les schémas (changement de classe, perte d´attribut, élimination). La deuxième phase concerne les opérations sur les données. Une première série d´opérations consiste à agréger les objets connexes qui ne possèdent plus de distinction descriptive, par exemple deux parcelles connexes transférées dans la même classe sont agrégées. Une deuxième série d´opérations modifie les données une à une en fonction de leurs caractéristiques et des spécifications de généralisation. Cette étape est celle qui pose le plus de problème parce qu´elle nécessite une analyse précise des transformations à apporter.
La décomposition des étapes de généralisation doit suivre le schéma suivant :
analyse des nouveaux besoins,
mise au point des règles de transformation du schéma de données en fonction des besoins,
transfert des données dans le schéma comportant les nouvelles classes et celles qui sont nécessaires à la généralisation : des filtrages simples sont réalisées à ce niveau,
réalisation des opérations ne nécessitant pas d´analyses contextuelles : cette étape repose sur des agrégations de données dues à la simplification du schéma,
réalisation des opérations nécessitant des analyses contextuelles.
La terminologie communément utilisée dans le monde des SIG pour décrire l´information géographique crée une confusion en matière de généralisation : "Une base de données est composée d´objets comportant une partie géométrique et une partie sémantique". On peut alors penser que le sens de l´information est attaché aux descripteurs non géométriques et ne réaliser des généralisations que sur ces seuls descripteurs. D´une part, le sens de l´information géographique est autant porté par les attributs non géométriques que géométriques – la forme est porteuse de sens - d´autre part l´immersion d´un objet dans son environnement est encore plus riche en information. Les bases de données géographiques sont actuellement décrites par des objets dont les relations ne peuvent être appréhendées que par une visualisation de leurs positions relatives qui nous permet de reconstituer mentalement le sens d´un espace géographique. Le cœur de la problématique de l´automatisation de la généralisation est en grande partie liée à notre capacité à rendre un ordinateur capable de représenter chaque information dans son environnement pour constituer des espaces d´analyse adaptés au processus de réduction d´information.
La généralisation de données demande une identification des transformations à appliquer sur les données. La diversité des généralisations (thématique, topographique, raster, vecteur, grandes échelles, etc.) fait qu´il n´existe pas un consensus sur la terminologie à employer [Rieger et Coulson 93]. On peut proposer une classification assez générale de réduction, regroupement, simplification et accentuation de l´information qui s´appliquent sur plusieurs objets, un objet ou une partie d´objet. Le Tableau 1 présente les opérateurs les plus fréquents en généralisation de données topographiques .

Tableau 1 Principaux opérateurs de généralisation
Depuis 30 ans des algorithmes ont été développés en se spécialisant de plus en plus. En effet, on ne peut pas appliquer le même algorithme pour réduire un réseau routier (treillis, contraintes de continuité et temps de parcours) et un réseau hydrographique (arbre, logique d´écoulement des eaux). Il existe donc des algorithmes de généralisation du réseau routier, du réseau hydrographique, des bâtiments, des routes, etc. De plus, des essais en généralisation interactive [Oeepe 97] montrent que des objets de même nature ne sont pas tous généralisés de la même façon pour une même généralisation : les algorithmes ne sont pas les mêmes et les valeurs paramétriques des objets traités par les mêmes algorithmes sont différents. Pourtant cette généralisation est possible en interactif, ce qui prouve que le cartographe sait reconnaître ce qui différencie un objet d´un autre et sait en déduire l´opération adaptée en fonction des besoins.
Le modèle proposé repose sur les idées suivantes :
la généralisation est un processus de changement d´état. Des transformations sont appliquées progressivement jusqu´à une convergence vers la satisfaction des besoins,
chaque entité est dotée d´un mécanisme décisionnel qui lui permet de choisir sa propre généralisation,
la généralisation requiert la représentation explicite de différents niveaux d´analyse. On parle d´objets micro pour les objets initiaux, d´objets méso pour les regroupements spatiaux et d´objets macro pour les populations d´objets de même type. Pendant le processus les situations - du niveau micro et méso - se généralisent. Les situations méso sont construites à l´aide de règles géographiques de regroupement . Elles permettent la réalisation d´opérations contextuelles et un meilleur maintien des relations sur les groupes lors de la généralisation de leurs situations composantes,
afin de converger vers un état satisfaisant, les spécifications de généralisation sont traduites sous forme de contraintes sur les caractères de chaque situation. Une situation qui se généralise choisit à un instant donné un algorithme qui lui permet de mieux satisfaire ses propres contraintes,
lors du processus, les situations interagissent. Afin de maintenir une cohérence globale des données, des communications particulières existent entre les situations. Elles échangent des informations ou des ordres. Une situation ne joue pas toujours le même rôle pendant le processus.
Dans notre modèle, une contrainte est une propriété à satisfaire. Une situation géographique est décrite par un ensemble de caractères (la taille, la forme, la granularité géométrique, la précision absolue, etc.) dont certains ne satisfont pas les spécifications de généralisation. Par exemple pour une carte au 1  : 50 000, une maison doit avoir au moins une taille de 260 m2 terrain pour être interprétable. La fonction contrainte est donc Taille.Maison > 260 m2 . Une contrainte peut porter sur un objet micro - Granularité.Maison > 10 m - sur deux objets - Distance > 10 m - sur un groupe d´objets – Densité.Zone-urbaine < 0.8, ou sur une population d´objets – Surface-Maisons  [0.3, 0,5] * Surface.Maisons-ini. Une contrainte non satisfaite provoque un conflit que chaque situation essaye de résoudre à l´aide de ses algorithmes de généralisation : pour satisfaire sa contrainte de taille, une maison se dilate. Malheureusement, il est difficile de satisfaire toutes les contraintes. Une situation essaye de satisfaire au mieux l´ensemble de ses contraintes en favorisant celles qui sont plus importantes pour une généralisation. Pour cela, elle évalue non pas la satisfaction par un booléen mais la distance au but, c´est à dire son degré d´insatisfaction ou gravité. On parle alors de contrainte instanciée. Une contrainte instanciée compare la valeur d´un caractère à ce qu´il devrait être. Par exemple, une maison de 158 m2 a une contrainte instanciée de taille, caractérisée par 1/ la taille courante 158 m2 2/ une gravité déduite de la comparaison entre la taille courante et la fonction de contrainte Taille.Maison > 260 m2 3/ une priorité de traitement. Le calcul de la gravité requiert l´existence d´une fonction d´évaluation ainsi qu´une échelle de gravité commune à toutes les contraintes. Si l´échelle est définie de 0 à 5, la gravité de la maison de 158 m2 sera de 4.
Les contraintes instanciées et les priorités entre contraintes permettent à chaque situation de comprendre ce qu´elle doit résoudre à un instant donné et d´auto-évaluer son état après chaque action : si son état s´est amélioré, elle continue sa généralisation, sinon elle tente une autre action (Figure 3). De plus, elles permettent en fin de généralisation de qualifier précisément l´écart entre les données initiales et les données généralisées.
L´identification des contraintes suit deux démarches. La première consiste à analyser les règles de généralisation énoncées par les cartographes [Weibel 96], la deuxième part des caractères de l´information géographique. L´objectif est de parvenir à relier les deux pour transformer le qualifiable en quantifiable. Cette recherche des variables du système est complétée par des essais expérimentaux : tant que l´état d´insatisfaction d´une situation ne reflète pas notre analyse qualitative, c´est qu´une variable manque ou qu´elle est mal prise en compte.
Schématiquement, les contraintes se décomposent en deux familles :
Les contraintes de généralisation qui incitent une modification de l´information pour respecter les nouvelles spécifications,
Les contraintes de maintien qui incitent la conservation des caractères importants qui qualifient l´espace.
Les contraintes de maintien (forme, position, répartition spatiale, etc. ) sont généralement des contraintes implicites : l´utilisateur ne pense pas à les détailler parce qu´elles vont de soi : l´espace généralisé doit préserver sa spécificité et fournir une image proche de la réalité initiale. Pourtant, ces contraintes doivent être identifiées et représentées explicitement parce que les algorithmes peuvent très rapidement détériorer une information non décrite. La Figure 2 montre une détérioration de la forme de routes lors de l´application d´un algorithme de filtrage qui respecte la contrainte de position absolue et la contrainte de granularité.

Figure 2 Détérioration de la forme des routes par l´application d´un algorithme de filtrage
Les contraintes de maintien suivent une autre logique que les contraintes de généralisation, parce que le maintien d´information n´est pas systématique pour toutes les situations de même type. Par exemple une règle classique de généralisation est de ‘maintenir les formes rares´ parce qu´elles qualifient l´espace. Si une contrainte de conservation de forme est simple à assurer en minimisant une déviation, la difficulté est de discriminer les formes rares des formes courantes. De façon général, des analyses contextuelles permettent de qualifier puis de contraindre les informations jugées importantes. Par défaut, un groupe généralisé doit conserver ses caractéristiques principales et ses exceptions. On retrouve les mêmes préoccupations pour des généralisations plus thématiques telles que la réduction d´information statistique à cartographier : "Une discrétisation réussie, du point de vue de la statistique, est celle qui conserve le mieux l´information apportée par les données. Cette notion d´information statistique a plusieurs composantes : l´ordre de grandeur du phénomène représenté, la forme de la distribution, sa dispersion et l´existence éventuelle de cas particuliers" [Beguin et Pumain 94 86]. Des procédures particulières sont nécessaires pour détecter les informations à conserver. Le résultat de ces analyses contextuelles se traduit généralement sous la forme de contraintes propres à certaines situations et sur une priorité de prise en compte du caractère à conserver. Pour résumer, deux informations portées par une contrainte instanciée sont importantes : la gravité quantifie le degré d´insatisfaction, la priorité locale traduit l´importance d´une information.
Dans le modèle proposé, chaque situation est responsable de sa propre généralisation, on parle alors d´autonomie. Les principes sont issus des systèmes multi agents [Ferber 97]. Un agent – micro ou méso – agit pour satisfaire son but représenté par l´ensemble de ses contraintes. L´état d´un agent correspond à son degré d´autosatisfaction. Les situations méso correspondent à des organisations, mais elles se généralisent et peuvent appartenir à d´autres organisations. De plus une situation micro peut être amenée à se décomposer en parties si elle se trouve trop peu homogène. Nous préférons conserver le terme de situation qui nous paraît plus générique, et modifier le rôle joué par une situation pendant son processus de généralisation.
Lorsqu´une situation est autonome, son objectif est de satisfaire au mieux ses contraintes en utilisant des algorithmes de généralisation appropriés. Pour choisir une action entreprendre, une situation a besoin de connaissances procédurales.
Dans certains cas, le choix peut être fonction des configurations :
Si gravité.contrainte1 =  & gravité. Contrainte2=  et priorité.caractère3 = 
Alors utiliser tel ou tel algorithme
La plupart du temps, l´hétérogénéité des contraintes fait que la généralisation d´une situation est progressive : une situation satisfait petit à petit ses contraintes. Dans ce cas, chaque contrainte instanciée propose une liste de solutions procédurales possibles et une priorité entre contraintes. La priorité d´une contrainte de généralisation est une priorité de traitement : ‘je dois être traitée avec telle priorité´. La priorité d´une contrainte de maintien est une priorité d´importance qui traduit l´importance de prise en compte d´un caractère pour le choix du traitement. Les contraintes de maintien d´information peuvent déconseiller l´usage d´un algorithme ou inciter le choix d´un algorithme. Par exemple si la forme d´une route est très sinueuse, la contrainte de forme déconseille un filtrage, si la forme est non homogène, elle conseille une segmentation. Une situation recherche les propositions faites par ses contraintes afin d´en déduire une liste de solutions ordonnées qu´elle testera jusqu´à une amélioration de son état. Pour une route les propositions peuvent être les suivantes :

Pour se généraliser, chaque situation dispose d´un modèle de décision (selon [Simon, 57]) qui lui permet de consulter ses contraintes, d´intégrer les propositions, de déduire un ensemble de solutions, d´agir, d´analyser son évolution et de valider son état. En cas de non amélioration, elle peut être aidée par une autre situation, et le cas échéant relaxer ses contraintes.

Figure 3 Modèle de décision d´une situation
Les fonctions relatives à la dynamique du système sont assez simples à mettre en place. Par contre, la qualité de convergence dépend de la capacité à justement calculer une contrainte instanciée (que généraliser ?) et de la qualité des connaissances procédurales (comment généraliser ?).
La création d´entités méso est motivée par le besoin de réaliser des opérations contextuelles et de contrôler de l´évolution des généralisations micro. Une succession d´opérations locales peut faire perdre à l´espace ses spécificités, provoquant souvent une uniformisation du paysage et une perte des structures de répartition. La caractérisation d´une situation méso est décomposée en deux partie  : ses caractères propres et les caractères de ses objets composants. A l´heure actuelle seuls les îlots urbain, les villes [Ruas 99], les groupes de bâtiments [Regnauld 98] et les dessertes - associations rues-bâtiments [Hangouët 98] - ont été définis comme situations méso participant au processus de généralisation.
L´îlot urbain est défini comme une zone délimitée par des rues, comportant au moins un bâtiment. Ce type d´entité constitue un espace d´analyse et de généralisation essentiel pour réaliser des opérations contextuelles telles que les déplacements de maisons (contraintes de distance) et les éliminations de rues (par agrégation d´îlots ‘semblables´). Sa construction est simple à partir de filtrage sur les relations topologiques d´inclusion et de connexité. Un îlot urbain est caractérisé par ses composants propres : nature, densité, élongation, compacité et par les distributions sémantique, de taille et de distance de ses objets composants (Figure 4, Figure 5).

Figure 4 Caractérisation d´un îlot urbain

Figure 5 Distribution des proximités dans un îlot urbain, en intégrant la symbolisation finale
L´identification des caractères de l´îlot urbain pour la généralisation cartographique au 1 : 50 000 est motivée par les besoins : la densité permet de déclencher une opération d´élimination de bâtiments ; la forme – compacité et élongation – est utilisée pour gérer les agrégations d´îlots ; les distances sont nécessaires aux déplacements ; la distribution des tailles permet de donner la main aux entités micro et d´assurer une non uniformisation des tailles en modifiant les contraintes de certains bâtiments. Les contraintes par défaut sur les îlots urbains sont calculées à partir de seuils provenant de grandeur visuelles classiques [Cuenin 72] (les distances et tailles minimales) ou d´études expérimentales [Ruas 99] (la densité simulée, la conservation sémantique). Les gravités évaluent la distance entre l´existant et la valeur contrainte sur 6 valeurs possibles de 0 (satisfaction totale) à 5 (insatisfaction maximale). Pour les distributions, les paramètres utilisés sont les valeurs extrêmes, les interquartiles, la moyenne et la médiane des valeurs. La Figure 6 illustre le calcul des gravités de l´îlot urbain représenté en Figure 4.

Figure 6 Calcul des gravités sur les caractères d´un îlot urbain
Les contraintes instanciées proposent des algorithmes de généralisation en fonction de la nature du conflit. Ainsi, en intégrant les propositions et les priorités locales, la situation parvient à se généraliser. La Figure 7 illustre une séquence de généralisation d´un îlot :

Figure 7 Généralisation d´un îlot urbain
Les séquences de généralisation de la Figure 7 sont les suivantes :
La situation se qualifie. Elle résout en premier la densité à l´aide d´un algorithme d´élimination de bâtiments basé sur les encombrements.
La densité étant globalement correcte, la situation déplace ses bâtiments pour respecter la contrainte de proximité.
Les conflits méso étant globalement résolus, la situation donne la main à ses bâtiments qui réalisent leur propre généralisation en se dilatant pour respecter leur contrainte de taille. L´îlot reprend la main et contrôle son état.
La dilatation ayant provoquée des conflits de proximités, l´îlot urbain déclenche un nouveau déplacement faible.
Enfin la situation se requalifie : son état s´est globalement amélioré même si des conflits de proximité subsistent.
Pendant le processus de généralisation une situation est amenée à jouer différents rôles. Un rôle correspond à un type de comportement spécifique. Dans l´exemple précédant, on voit que l´îlot parfois se généralise, parfois coordonne et contrôle la généralisation de ses objets composants. Quatre rôles importants ont été identifiés. Une situation se généralise, légifère, coordonne et contrôle.
Lorsqu´une situation se généralise, elle donne des ordres de généralisation à ses objets composants qui obéissent (par exemple ‘déplace-toi´, ‘élimine-toi´),
Lorsqu´une situation légifère, elle compare certains caractères de ses objets composants et modifie leurs contraintes afin d´assurer le maintien de relations d´ordre, de différence ou de similitude,
Lorsqu´une situation coordonne la généralisation de ses composants, elle recherche un ordre préférentiel d´autonomie afin de minimiser les conflits.
Lorsqu´une situation contrôle, elle vérifie que ses propriétés n´ont pas été détruites par la généralisation de ses objets composants, et propose des solutions lorsqu´un ou plusieurs de ses composants ne parvient pas à se généraliser.
Le rôle de législateur est celui qui permet la réalisation d´analyses comparatives pour maintenir des caractères d´ensemble et des exceptions dans un groupe. Actuellement seuls les aspects relatifs à la taille des bâtiments et à la densité des îlots ont été analysés [Ruas 99] mais ce type de démarche devrait être étendu à d´autres caractères et sur différents objets.
La coordination d´actions - dans le contexte de la généralisation - est un aspect encore moins avancé au niveau recherche. Des premières analyses montrent que la logique doit intégrer des notions d´encombrement ainsi que la capacité de chaque situation à amortir les effets générés par leur environnement. Des mécanismes de négociation seraient également extrêmement intéressants mais beaucoup plus complexes à mettre en œuvre.
La difficulté d´automatisation du processus généralisation est non seulement due à la complexité naturelle du processus mais aussi aux insuffisances des SIG. A l´heure actuelle, l´information géographique est représentée par des entités indépendantes (une géométrie, un code descriptif) alors que c´est l´association d´entités qui donne la spécificité d´un espace. Ce problème est particulièrement crucial pour la généralisation où il faut raisonner sur des groupes d´objets qui doivent conserver leurs propriétés principales. L´idée que des entités de même type se généralisent de la même façon – donc avec le même algorithme – est incompatible avec la notion de réduction d´information qui repose sur un différenciation des informations pour distinguer l´important du redondant ou de l´inutile. De plus l´information géographique n´est pas portée que par un code et une position spatiale mais par d´autres caractères tels que la forme, la densité, la répartition pour lesquels très peu d´outils d´analyse ont été développés dans les SIG. La généralisation est un des applicatifs qui souligne l´inadaptation des SIG actuels pour générer de l´information à partir d´une base de données.
Le modèle proposé repose sur les idées :
d´autonomie : deux informations différentes ne peuvent souvent pas être traitées de la même façon. Une situation s´autoanalyse pour choisir les traitements qui lui sont adaptés,
de niveau d´analyse : la réduction d´information nécessite des comparaisons entre plusieurs informations qui doivent être prises en charge par des entités qui disposent de vues d´ensemble,
de contraintes : une automatisation ne peut être réalisée que si les buts à atteindre sont explicitement représentés pour tenter de les satisfaire.
Les efforts en automatisation du processus apportent en plus du fait de se rapprocher d´une solution, de nouvelles réflexions sur la nécessité de savoir analyser les données et représenter les besoins. En ce sens, ce modèle participe à l´évolution des SIG vers des SAG : Systèmes d´Analyses Géographiques. Les SIG commercialisés devraient dépasser les tâches initiales de saisie, stockage et dessin de l´information pour permettre aux utilisateurs de données géographiques une construction aisée de méthodes permettant la création de nouvelles informations adaptées à leurs besoins. Même si l´analyse est comprise dans les ‘5 A´ des SIG (Acquisition, Archivage, Analyse, Affichage et Abstraction) la capacité d´analyse est la fonction la moins développée bien qu´elle nous semble être la plus fondamentale.
